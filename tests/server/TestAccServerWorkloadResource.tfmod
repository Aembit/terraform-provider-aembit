provider "aembit" {
}

resource "aembit_server_workload" "test" {
	name = "Unit Test 1 - Modified"
    description = "Description"
    is_active = true
	service_endpoint = {
		host = "unittest.testhost2.com"
		port = 443
        tls = true
		app_protocol = "HTTP"
		transport_protocol = "TCP"
		requested_port = 443
        requested_tls = true
		tls_verification = "full"
		authentication_config = {
			"method" = "HTTP Authentication"
			"scheme" = "Header"
			"config" = "X-Vault-Token"
		}
	}
}

resource "aembit_server_workload" "test_wildcard" {
	name = "Unit Test 1 Wildcard - Modified"
    description = "Description"
    is_active = false
	service_endpoint = {
		host = "*.testhost2.com"
		port = 443
        tls = true
		app_protocol = "HTTP"
		transport_protocol = "TCP"
		requested_port = 443
        requested_tls = true
		tls_verification = "full"
		authentication_config = {
			"method" = "HTTP Authentication"
			"scheme" = "Bearer"
		}
	}
}

resource "aembit_server_workload" "test_oauth" {
	name = "Unit Test 1 OAuth - Modified"
    description = "Description"
    is_active = false
	service_endpoint = {
		host = "oauth.testhost.com"
		requested_port = 443
		port = 443
        tls = true
		app_protocol = "OAuth"
		url_path = "/path/to/token"
		transport_protocol = "TCP"
        requested_tls = true
		tls_verification = "full"
		authentication_config = {
			method = "OAuth Client Authentication"
			scheme = "POST Body"
		}
	}
}

resource "aembit_server_workload" "test_mcp_empty_url_path" {
	name = "Unit Test 1 MCP - Modified"
    description = "Description"
    is_active = false
	service_endpoint = {
		host = "mcp.testhost.com"
		port = 80
		requested_port = 80
        tls = false
		app_protocol = "MCP"
		transport_protocol = "TCP"
		tls_verification = "full"
		authentication_config = {
			method = "HTTP Authentication"
			scheme = "Bearer"
		}
	}
}

resource "aembit_server_workload" "test_mcp_with_url_path" {
	name = "Unit Test 1 MCP - Modified"
    description = "Description"
    is_active = false
	service_endpoint = {
		host = "mcp.testhost.com"
		port = 80
		requested_port = 80
        tls = false
		app_protocol = "MCP"
		url_path = "/token"
		transport_protocol = "TCP"
		tls_verification = "full"
		authentication_config = {
			method = "HTTP Authentication"
			scheme = "Bearer"
		}
	}
}

resource "aembit_server_workload" "test_oracle_database" {
	name = "Unit Test 1 Oracle Database - Modified"
    description = "Description"
    is_active = false
	service_endpoint = {
		host = "oracleDatabase.testhost.com"
		port = 2484
        tls = true
		app_protocol = "Oracle Database"
		transport_protocol = "TCP"
		requested_port = 2484
        requested_tls = true
		tls_verification = "full"
		authentication_config = {
			method = "Password Authentication"
			scheme = "Password"
		}
	}
}