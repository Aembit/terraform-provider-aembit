---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "aembit_trust_provider Resource - terraform-provider-aembit"
subcategory: ""
description: |-
  
---

# aembit_trust_provider (Resource)

Resource to create and manage Trust Providers in a Aembit Cloud tenant.

## Example Usage
```terraform
resource "aembit_trust_provider" "aws" {
	name = "AWS Metadata Trust Provider"
	is_active = true
	aws_metadata = {
		certificate = <<-EOT
-----BEGIN CERTIFICATE-----
MIIDgTCCAmmgAwIBAgIQSpi05faO6r1DOItzHn1SfjANBgkqhkiG9w0BAQsFADAX
MRUwEwYDVQQDDAxhZW1iaXQubG9jYWwwHhcNMjQwNTMxMTM0MjA5WhcNMjUwNTMx
MTQwMjA5WjAXMRUwEwYDVQQDDAxhZW1iaXQubG9jYWwwggEiMA0GCSqGSIb3DQEB
AQUAA4IBDwAwggEKAoIBAQDgC/cb8YsJExhNgu1mZERrU8RrOWu6qtV/jfuN4lgJ
WvRuSq8uLkN6ZQA36s42aNy2hy6smxJZZWuQfiWXeLVPICcuXcITlMbpPnok/0LS
0o3jLQcw/rT/i2ybdRanko1/Vag8RZOGaIDHLyfeuoc1RQ2yZB6hC+8eUkZEL3XH
kTwQ+uD/blcpgGYFN7B6bkhpUB7dA9xf5JOOA7hQVG9RNt3bsQxyZndGBPKuac27
rL+2RhDQuns+ahasRRjQyV4uvgGNM4X6aoylVnct7KN/PV/iKX4RkK3cLRO4CnuB
nksTE13NZWi4LyPNTDMO8odeSwC3yfUHkEwNDiRACToJAgMBAAGjgcgwgcUwDgYD
VR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcDATB1BgNV
HREEbjBsggxhZW1iaXQubG9jYWyCDiouYWVtYml0LmxvY2FsghIqLmFwcC5hZW1i
aXQubG9jYWyCEiouYXBpLmFlbWJpdC5sb2NhbIIRKi5pZC5hZW1iaXQubG9jYWyC
ESouZWMuYWVtYml0LmxvY2FsMB0GA1UdDgQWBBRwId7rKwY+2QkkdcWQkQKHzSYu
CTANBgkqhkiG9w0BAQsFAAOCAQEAzFc6UQdoUuit5bQxvadh/aZWnkOe/aL+q/vo
B+ONcymqB7QAXOJFDbUm/4Fq4xb8yj/Y+vF6Vbe5IM/esIRkKzLkT/Fa+yWmGx66
pJRhOrS8LYVJMnuJ3sInfAT8aLIYfKsYAkyMnJ70oWRmWbVvo5L+ukqmFk8WzWUi
aXC/amSYD82+BouCdHiufbFADS0WbpJTN25hJhPlRNaIRxzD63m3zjWQtEK+oUwD
uy16zlW2rUwNgW/Bgl8RLuf3gZnUStBoLV3xqIA3BibEp4DpYLj4AKz16LM/b/33
sfa3cNOSjZ3VJtS4B9JoBHh6RrAIxSk2Hoz9dTTDrp61oz3Lrw==
-----END CERTIFICATE-----
EOT
		account_id = "account_id"
		architecture = "architecture"
		availability_zone = "availability_zone"
		billing_products = "billing_products"
		image_id = "image_id"
		instance_id = "instance_id"
		instance_type = "instance_type"
		kernel_id = "kernel_id"
		marketplace_product_codes = "marketplace_product_codes"
		pending_time = "pending_time"
		private_ip = "private_ip"
		ramdisk_id = "ramdisk_id"
		region = "region"
		version = "version"
	}
}

resource "aembit_trust_provider" "azure" {
	name = "Azure Metadata Trust Provider"
	is_active = true
	azure_metadata = {
		subscription_id = "subscription_id"
	}
}

resource "aembit_trust_provider" "kerberos" {
	name = "Kerberos Agent Controller Trust Provider"
	is_active = true
	kerberos = {
		agent_controller_id = "fb1b63df-bfc2-4ff9-baa4-fc84bdf9a7e5"
		realm = "realm"
		principal = "principal"
		source_ip = "source_ip"
	}
}
```

## Changes for v1.21

### Kerberos Trust Provider
As of v1.21, the Kerberos Trust Provider has been updated to replace the `realm` field with `realm_domain` and `realms` with `realms_domains`, respectively.
Please make sure to update your configuration accordingly.

<hr>

**Note:** One and only one nested schema (e.g. `aws_metadata`) must be provided for the Trust Provider to be configured.
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name for the Trust Provider.

### Optional

- `aws_metadata` (Attributes) AWS Metadata type Trust Provider configuration. (see [below for nested schema](#nestedatt--aws_metadata))
- `aws_role` (Attributes) AWS Role type Trust Provider configuration. (see [below for nested schema](#nestedatt--aws_role))
- `azure_metadata` (Attributes) Azure Metadata type Trust Provider configuration. (see [below for nested schema](#nestedatt--azure_metadata))
- `description` (String) Description for the Trust Provider.
- `gcp_identity` (Attributes) GCP Identity type Trust Provider configuration. (see [below for nested schema](#nestedatt--gcp_identity))
- `github_action` (Attributes) GitHub Action type Trust Provider configuration. (see [below for nested schema](#nestedatt--github_action))
- `gitlab_job` (Attributes) GitLab Job type Trust Provider configuration. (see [below for nested schema](#nestedatt--gitlab_job))
- `is_active` (Boolean) Active status of the Trust Provider.
- `kerberos` (Attributes) Kerberos type Trust Provider configuration. (see [below for nested schema](#nestedatt--kerberos))
- `kubernetes_service_account` (Attributes) Kubernetes Service Account type Trust Provider configuration. (see [below for nested schema](#nestedatt--kubernetes_service_account))
- `oidc_id_token` (Attributes) OIDC ID Token type Trust Provider configuration. (see [below for nested schema](#nestedatt--oidc_id_token))
- `tags` (Map of String) Tags are key-value pairs.
- `terraform_workspace` (Attributes) Terraform Workspace type Trust Provider configuration. (see [below for nested schema](#nestedatt--terraform_workspace))

### Read-Only

- `id` (String) Unique identifier of the Trust Provider.

<a id="nestedatt--aws_metadata"></a>
### Nested Schema for `aws_metadata`

Optional:

- `account_id` (String) The ID of the AWS account that launched the instance.
- `account_ids` (Set of String) The set of accepted AWS account IDs which are hosting the Client Workloads. Used only for cases where multiple AWS account IDs can be matched.
- `architecture` (String) The architecture of the AMI used to launch the instance (i386 | x86_64 | arm64).
- `availability_zone` (String) The Availability Zone in which the instance is running.
- `availability_zones` (Set of String) The set of accepted AWS Availability Zones which are hosting the Client Workloads. Used only for cases where multiple AWS Availability Zones can be matched.
- `billing_products` (String) The billing products of the instance.
- `certificate` (String) PEM Certificate to be used for Signature verification.
- `image_id` (String) The ID of the AMI used to launch the instance.
- `instance_id` (String) The ID of the instance.
- `instance_ids` (Set of String) The set of accepted AWS Instance IDs which are hosting the Client Workloads. Used only for cases where multiple AWS Instance IDs can be matched.
- `instance_type` (String) The instance type of the instance.
- `instance_types` (Set of String) The set of accepted AWS Instance types which are hosting the Client Workloads. Used only for cases where multiple AWS Instance types can be matched.
- `kernel_id` (String) The ID of the kernel associated with the instance, if applicable.
- `marketplace_product_codes` (String) The AWS Marketplace product code of the AMI used to launch the instance.
- `pending_time` (String) The date and time that the instance was launched.
- `private_ip` (String) The private IPv4 address of the instance.
- `ramdisk_id` (String) The ID of the RAM disk associated with the instance, if applicable.
- `region` (String) The Region in which the instance is running.
- `regions` (Set of String) The set of accepted AWS Regions which are hosting the Client Workloads. Used only for cases where multiple AWS Regions can be matched.
- `version` (String) The version of the instance identity document format.


<a id="nestedatt--aws_role"></a>
### Nested Schema for `aws_role`

Optional:

- `account_id` (String) The ID of the AWS account that is hosting the Client Workload.
- `account_ids` (Set of String) The set of accepted AWS Account IDs which are hosting the Client Workloads. Used only for cases where multiple AWS Account IDs can be matched.
- `assumed_role` (String) The Name of the AWS IAM Role which is running the Client Workload.
- `assumed_roles` (Set of String) The set of accepted AWS Assumed Roles which are hosting the Client Workloads. Used only for cases where multiple AWS Assumed Roles can be matched.
- `role_arn` (String) The ARN of the AWS IAM Role which is running the Client Workload.
- `role_arns` (Set of String) The set of accepted Role ARNs which are hosting the Client Workloads. Used only for cases where multiple Role ARNs can be matched.
- `username` (String) The UserID of the AWS IAM Account which is running the Client Workload (not commonly used).
- `usernames` (Set of String) The set of accepted AWS UserIDs which are hosting the Client Workloads. Used only for cases where multiple AWS UserIDs can be matched.


<a id="nestedatt--azure_metadata"></a>
### Nested Schema for `azure_metadata`

Optional:

- `sku` (String) Specific SKU for the Virtual Machine image.
- `skus` (Set of String) The set of accepted Azure SKUs which are hosting the Client Workloads. Used only for cases where multiple Azure SKUs can be matched.
- `subscription_id` (String) Azure subscription for the Virtual Machine.
- `subscription_ids` (Set of String) The set of accepted Azure Subscription IDs which are hosting the Client Workloads. Used only for cases where multiple Azure Subscription IDs can be matched.
- `vm_id` (String) Unique identifier for the Virtual Machine.
- `vm_ids` (Set of String) The set of accepted Azure VM IDs which are hosting the Client Workloads. Used only for cases where multiple Azure VM IDs can be matched.


<a id="nestedatt--gcp_identity"></a>
### Nested Schema for `gcp_identity`

Optional:

- `email` (String) The GCP Service Account email address associated with the resource.
- `emails` (Set of String) A set of GCP Service Account email addresses that are associated with the resource(s).


<a id="nestedatt--github_action"></a>
### Nested Schema for `github_action`

Optional:

- `actor` (String) The GitHub Actor which initiated the GitHub Action.
- `actors` (Set of String) The set of accepted GitHub ID Token Actors which initiated the GitHub Action. Used only for cases where multiple GitHub ID Token Actors can be matched.
- `repositories` (Set of String) The set of accepted GitHub ID Token Repositories which initiated the GitHub Action. Used only for cases where multiple GitHub ID Token Repositories can be matched.
- `repository` (String) The GitHub Repository associated with the GitHub Action ID Token.
- `workflow` (String) The GitHub Workflow execution associated with the GitHub Action ID Token.
- `workflows` (Set of String) The set of accepted GitHub ID Token Workflows which initiated the GitHub Action. Used only for cases where multiple GitHub ID Token Workflows can be matched.

Read-Only:

- `oidc_audience` (String) The audience value required for the GitHub Action ID Token.
- `oidc_client_id` (String) The OAuth Client ID value required for authenticating a GitHub Action.


<a id="nestedatt--gitlab_job"></a>
### Nested Schema for `gitlab_job`

Optional:

- `namespace_path` (String) The GitLab ID Token Namespace Path which initiated the GitLab Job.
- `namespace_paths` (Set of String) The set of accepted GitLab ID Token Namespace Paths which initiated the GitLab Job. Used only for cases where multiple GitLab ID Token Namespace Paths can be matched.
- `oidc_endpoint` (String) The GitLab OIDC Endpoint used for validating GitLab Job generated ID Tokens. Default: `https://gitlab.com`.
- `project_path` (String) The GitLab ID Token Project Path which initiated the GitLab Job.
- `project_paths` (Set of String) The set of accepted GitLab ID Token Project Paths which initiated the GitLab Job. Used only for cases where multiple GitLab ID Token Project Paths can be matched.
- `ref_path` (String) The GitLab ID Token Ref Path which initiated the GitLab Job.
- `ref_paths` (Set of String) The set of accepted GitLab ID Token Ref Paths which initiated the GitLab Job. Used only for cases where multiple GitLab ID Token Ref Paths can be matched.
- `subject` (String) The GitLab ID Token Subject which initiated the GitLab Job.
- `subjects` (Set of String) The set of accepted GitLab ID Token Subjects which initiated the GitLab Job. Used only for cases where multiple GitLab ID Token Subjects can be matched.

Read-Only:

- `oidc_audience` (String) The audience value required for the GitLab Job ID Token.
- `oidc_client_id` (String) The OAuth Client ID value required for authenticating a GitLab Job.


<a id="nestedatt--kerberos"></a>
### Nested Schema for `kerberos`

Required:

- `agent_controller_ids` (Set of String) Unique identifier for the Aembit Agent Controller to use for Signature verification.

Optional:

- `principal` (String) The Kerberos Principal of the authenticated Agent Proxy.
- `principals` (Set of String) The set of accepted Kerberos Principals which initiated the authenticated Agent Proxy. Used only for cases where multiple Kerberos Principals can be matched.
- `realm_domain` (String) The Kerberos Realm or ActiveDirectory Domain of the authenticated Agent Proxy.
- `realms_domains` (Set of String) The set of accepted Kerberos Realms or ActiveDirectory Domains which initiated the authenticated Agent Proxy. Used for cases where multiple Kerberos Realms or ActiveDirectory Domains can be matched.
- `source_ip` (String) The Source IP Address of the authenticated Agent Proxy.
- `source_ips` (Set of String) The set of accepted Source IPs which initiated the authenticated Agent Proxy. Used only for cases where multiple Source IPs can be matched.


<a id="nestedatt--kubernetes_service_account"></a>
### Nested Schema for `kubernetes_service_account`

Optional:

- `issuer` (String) The Issuer (`iss` claim) of the Kubernetes Service Account Token.
- `issuers` (Set of String) The set of accepted Issuer values of the associated Kubernetes Service Account Token. Used only for cases where multiple Issuers can be matched.
- `jwks` (String) The JSON Web Key Set (JWKS) containing public keys used for signature verification.<br>**Note:** Only strictly valid JSON, with no trailing commas, will pass validation for this field.
- `namespace` (String) The Namespace of the Kubernetes Service Account Token.
- `namespaces` (Set of String) The set of accepted Namespace values of the associated Kubernetes Service Account Token. Used only for cases where multiple Namespaces can be matched.
- `oidc_endpoint` (String) The OIDC Endpoint from which Public Keys can be retrieved for verifying the signature of the Kubernetes Service Account Token.
- `pod_name` (String) The Pod Name of the Kubernetes Service Account Token.
- `pod_names` (Set of String) The set of accepted Pod Name values of the associated Kubernetes Service Account Token. Used only for cases where multiple Pod Names can be matched.
- `public_key` (String) The Public Key that can be used to verify the signature of the Kubernetes Service Account Token.
- `service_account_name` (String) The Service Account Name of the Kubernetes Service Account Token.
- `service_account_names` (Set of String) The set of accepted Service Account Name values of the associated Kubernetes Service Account Token. Used only for cases where multiple Service Account Names can be matched.
- `subject` (String) The Subject (`sub` claim) of the Kubernetes Service Account Token.
- `subjects` (Set of String) The set of accepted Subject values of the associated Kubernetes Service Account Token. Used only for cases where multiple Subjects can be matched.


<a id="nestedatt--oidc_id_token"></a>
### Nested Schema for `oidc_id_token`

Optional:

- `audience` (String) The Audience (`aud` claim) of the OIDC ID Token.
- `audiences` (Set of String) The set of accepted Audience values of the associated OIDC ID Token. Used only for cases where multiple Audiences can be matched.
- `issuer` (String) The Issuer (`iss` claim) of the OIDC ID Token.
- `issuers` (Set of String) The set of accepted Issuer values of the associated OIDC ID Token. Used only for cases where multiple Issuers can be matched.
- `jwks` (String) The JSON Web Key Set (JWKS) containing public keys used for signature verification.<br>**Note:** Only strictly valid JSON, with no trailing commas, will pass validation for this field.
- `oidc_endpoint` (String) The OIDC Endpoint from which Public Keys can be retrieved for verifying the signature of the OIDC ID Token.
- `public_key` (String) The Public Key that can be used to verify the signature of the OIDC ID Token.
- `subject` (String) The Subject (`sub` claim) of the OIDC ID Token.
- `subjects` (Set of String) The set of accepted Subject values of the associated OIDC ID Token. Used only for cases where multiple Subjects can be matched.


<a id="nestedatt--terraform_workspace"></a>
### Nested Schema for `terraform_workspace`

Optional:

- `organization_id` (String) The Organization ID of the calling Terraform Workspace.
- `organization_ids` (Set of String) The set of accepted Organization ID values of the calling Terraform Workspace. Used only for cases where multiple Terraform ID Token Organization IDs can be matched.
- `project_id` (String) The Project ID of the calling Terraform Workspace.
- `project_ids` (Set of String) The set of accepted Project ID values of the calling Terraform Workspace. Used only for cases where multiple Terraform ID Token Project IDs can be matched.
- `workspace_id` (String) The Workspace ID of the calling Terraform Workspace.
- `workspace_ids` (Set of String) The set of accepted Workspace ID values of the calling Terraform Workspace. Used only for cases where multiple Terraform ID Token Workspace IDs can be matched.


