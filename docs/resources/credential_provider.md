---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "aembit_credential_provider Resource - terraform-provider-aembit"
subcategory: ""
description: |-
  
---

# aembit_credential_provider (Resource)

Resource to create and manage Credential Providers in a Aembit Cloud tenant.

## Example Usage
```terraform
resource "aembit_credential_provider" "api_key" {
	name = "API Key Credential Provider"
	is_active = true
	api_key = {
		api_key = "test_api_key"
	}
}

resource "aembit_credential_provider" "oauth_authHeader" {
	name = "OAuth Credential Provider"
	is_active = true
	oauth_client_credentials = {
		token_url = "https://aembit.io/token"
		client_id = "test_client_id"
		client_secret = "test_client_secret"
		scopes = "test_scopes"
		credential_style = "authHeader"
		custom_parameters = [
		{
			key = "key"
			value = "value"
			value_type = "literal"
		}
	]
	}
}


resource "aembit_credential_provider" "oauth_postBody" {
	name = "OAuth Credential Provider"
	is_active = true
	oauth_client_credentials = {
		token_url = "https://aembit.io/token"
		client_id = "test_client_id"
		client_secret = "test_client_secret"
		scopes = "test_scopes"
		credential_style = "postBody"
		custom_parameters = [
		{
			key = "key"
			value = "value"
			value_type = "literal"
		}
	]
	}
}

resource "aembit_credential_provider" "vault" {
	name = "Vault Credential Provider"
	is_active = true
	vault_client_token = {
		subject = "subject"
		subject_type = "literal"
		lifetime = 60
		custom_claims = [
			{
				key = "key"
				value = "value"
				value_type = "literal"
			}
		]
		vault_host = "vault.aembit.io"
		vault_port = 8200
		vault_tls = true
		vault_namespace = "vault_namespace"
		vault_path = "vault_path"
		vault_role = "vault_role"
	}
}
```

### AWS Secrets Manager Value Credential Provider
This type of credential provider must reference an AWS IAM Role Credential Provider Integration.

```terraform
resource "aembit_credential_provider_integration" "aws_iam_role_cpi" {
  name        = "AWS IAM Role Credential Provider Integration"
  description = "Detailed description of AWS IAM Role Credential Provider Integration"
  aws_iam_role = {
    role_arn            = "arn:aws:iam::123456789012:role/MyRole"
    lifetime_in_seconds = 3600
  }
}
```
```terraform
resource "aembit_credential_provider" "aws_sm_value" {
  name        = "AWS Secrets Manager Value Credential Provider"
  description = "Credential Provider Description"
  is_active   = true
  aws_secrets_manager_value = {
    secret_arn                         = "arn:aws:secretsmanager:us-east-1:123456789012:secret:samplename-ABCDEF"
    secret_key_1                       = "key1"
    secret_key_2                       = "key2"
    private_network_access             = false
    credential_provider_integration_id = aembit_credential_provider_integration.aws_iam_role_cpi.id
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name for the Credential Provider.

### Optional

- `aembit_access_token` (Attributes) Aembit Access Token type Credential Provider configuration. (see [below for nested schema](#nestedatt--aembit_access_token))
- `api_key` (Attributes) API Key type Credential Provider configuration. (see [below for nested schema](#nestedatt--api_key))
- `aws_secrets_manager_value` (Attributes) AWS Secrets Manager Value type Credential Provider configuration. This type of credential provider supports secret values in plaintext or JSON formats. Do not provide values in `secret_key_1` and `secret_key_2` fields for plaintext secrets. These fields are used to specify property names when a secret contains a JSON. (see [below for nested schema](#nestedatt--aws_secrets_manager_value))
- `aws_sts` (Attributes) AWS Security Token Service Federation type Credential Provider configuration. (see [below for nested schema](#nestedatt--aws_sts))
- `azure_entra_workload_identity` (Attributes) Azure Entra Workload Identity Federation type Credential Provider configuration. (see [below for nested schema](#nestedatt--azure_entra_workload_identity))
- `description` (String) Description for the Credential Provider.
- `google_workload_identity` (Attributes) Google Workload Identity Federation type Credential Provider configuration. (see [below for nested schema](#nestedatt--google_workload_identity))
- `id` (String) Unique identifier of the Credential Provider.
- `is_active` (Boolean) Active status of the Credential Provider.
- `jwt_svid_token` (Attributes) JWT-SVID Token type Credential Provider configuration. (see [below for nested schema](#nestedatt--jwt_svid_token))
- `managed_gitlab_account` (Attributes) Managed GitLab Account type Credential Provider configuration. (see [below for nested schema](#nestedatt--managed_gitlab_account))
- `oauth_authorization_code` (Attributes) OAuth Authorization Code Flow type Credential Provider configuration. (see [below for nested schema](#nestedatt--oauth_authorization_code))
- `oauth_client_credentials` (Attributes) OAuth Client Credentials Flow type Credential Provider configuration. (see [below for nested schema](#nestedatt--oauth_client_credentials))
- `oidc_id_token` (Attributes) OIDC ID Token type Credential Provider configuration. (see [below for nested schema](#nestedatt--oidc_id_token))
- `snowflake_jwt` (Attributes) JSON Web Token type Credential Provider configuration. (see [below for nested schema](#nestedatt--snowflake_jwt))
- `tags` (Map of String) Tags are key-value pairs.
- `username_password` (Attributes) Username/Password type Credential Provider configuration. (see [below for nested schema](#nestedatt--username_password))
- `vault_client_token` (Attributes) Vault Client Token type Credential Provider configuration. (see [below for nested schema](#nestedatt--vault_client_token))

<a id="nestedatt--aembit_access_token"></a>
### Nested Schema for `aembit_access_token`

Required:

- `lifetime` (Number) Lifetime of the Credential Provider.
- `role_id` (String) Aembit Role ID of the Credential Provider.

Read-Only:

- `audience` (String) Audience of the Credential Provider.


<a id="nestedatt--api_key"></a>
### Nested Schema for `api_key`

Required:

- `api_key` (String, Sensitive) API Key secret of the Credential Provider.


<a id="nestedatt--aws_secrets_manager_value"></a>
### Nested Schema for `aws_secrets_manager_value`

Required:

- `credential_provider_integration_id` (String) The unique identifier of the Credential Provider Integration of type AWS IAM Role.
- `secret_arn` (String) ARN of the AWS Secrets Manager secret to be used by the Credential Provider.

Optional:

- `private_network_access` (Boolean) Indicates that the AWS Secrets Manager is accessible via a private network only.
- `secret_key_1` (String) Used when an AWS Secrets Manager secret object is in JSON format. Specifies a key of an element with the secret value.
- `secret_key_2` (String) Similar to `secret_key_1` but used when you need a credential provider to work with 2 secret values. For example, a username / password pair.


<a id="nestedatt--aws_sts"></a>
### Nested Schema for `aws_sts`

Required:

- `role_arn` (String) AWS Role Arn to be used for the AWS Session credentials requested by the Credential Provider.

Optional:

- `lifetime` (Number) Lifetime (seconds) of the AWS Session credentials requested by the Credential Provider.

Read-Only:

- `oidc_issuer` (String) OIDC Issuer for AWS IAM Identity Provider configuration of the Credential Provider.
- `token_audience` (String) Token Audience for AWS IAM Identity Provider configuration of the Credential Provider.


<a id="nestedatt--azure_entra_workload_identity"></a>
### Nested Schema for `azure_entra_workload_identity`

Required:

- `audience` (String) Audience for Azure Entra Workload Identity Federation configuration of the Credential Provider.
- `azure_tenant` (String) Azure Tenant ID for Azure Entra Workload Identity Federation configuration of the Credential Provider.
- `client_id` (String) Azure Client ID for Azure Entra Workload Identity Federation configuration of the Credential Provider.
- `scope` (String) Scope for Azure Entra Workload Identity Federation configuration of the Credential Provider.
- `subject` (String) Subject for JWT Token for Azure Entra Workload Identity Federation configuration of the Credential Provider.

Read-Only:

- `oidc_issuer` (String) OIDC Issuer for Azure Entra Workload Identity Federation configuration of the Credential Provider.


<a id="nestedatt--google_workload_identity"></a>
### Nested Schema for `google_workload_identity`

Required:

- `audience` (String) Audience for GCP Workload Identity Federation configuration of the Credential Provider.
- `service_account` (String) Service Account email of the GCP Session credentials requested by the Credential Provider.

Optional:

- `lifetime` (Number) Lifetime (seconds) of the GCP Session credentials requested by the Credential Provider.

Read-Only:

- `oidc_issuer` (String) OIDC Issuer for GCP Workload Identity Federation configuration of the Credential Provider.


<a id="nestedatt--jwt_svid_token"></a>
### Nested Schema for `jwt_svid_token`

Required:

- `algorithm_type` (String) JWT Signing algorithm type (RS256 or ES256)
- `audience` (String) Audience for JWT-SVID Token configuration of the Credential Provider.
- `lifetime_in_minutes` (Number) Lifetime of the Credential Provider in minutes.
- `subject` (String) Subject for JWT Token for JWT-SVID Token configuration of the Credential Provider.
- `subject_type` (String) Type of value for the JWT Token Subject. Possible values are `literal` or `dynamic`.

Optional:

- `custom_claims` (Attributes Set) Set of Custom Claims for the JWT Token. (see [below for nested schema](#nestedatt--jwt_svid_token--custom_claims))

Read-Only:

- `issuer` (String) Issuer claim for JWT-SVID Token configuration of the Credential Provider.

<a id="nestedatt--jwt_svid_token--custom_claims"></a>
### Nested Schema for `jwt_svid_token.custom_claims`

Required:

- `key` (String) Key for the JWT Token Custom Claim.
- `value` (String) Value for the JWT Token Custom Claim.
- `value_type` (String) Type of value for the JWT Token Custom Claim. Possible values are `literal` or `dynamic`.



<a id="nestedatt--managed_gitlab_account"></a>
### Nested Schema for `managed_gitlab_account`

Required:

- `access_level` (Number) The access level of authorization. Valid values: 0 (No Access), 5 (Minimal Access), 10 (Guest), 15 (Planner), 20 (Reporter), 30 (Developer), 40 (Maintainer), 50 (Owner).
- `credential_provider_integration_id` (String) The unique identifier of the credential provider integration.
- `group_ids` (Set of String) The set of GitLab group IDs.
- `lifetime_in_hours` (Number) Lifetime of the managed GitLab token in hours.
- `project_ids` (Set of String) The set of GitLab project IDs.
- `scope` (String) Scope for Managed Gitlab Account configuration of the Credential Provider.

Optional:

- `lifetime_in_days` (Number, Deprecated) Lifetime of the managed GitLab token in days.</br>Use `lifetime_in_hours` instead. This field is no longer used and will be removed in a future version.</br>Until it is removed, please use the fractional equivalent.</br>For example, for a lifetime of 6 hours, use `lifetime_in_days = 0.25`.
- `service_account_username` (String) Service Account Username value to be used for the service account created for this Credential Provider. If not specified, the service account username will be generated by Aembit using the following format: ``Aembit_<credential_provider_name>_managed_service_account``.<br>**Note on Service Account Username Updates for Self-Managed GitLab or Dedicated GitLab Instances**<br>The service_account_username attribute for this resource cannot be updated on Self-Managed or Dedicated GitLab instances after creation. This is due to a limitation in the GitLab API, which does not currently provide a method for modifying instance-level service accounts.<br>Consequently, in order to change this attribute in your Terraform configuration you will need to destroy and reecreating the Credential Provider. This behavior does not affect GitLab.com SaaS instances.


<a id="nestedatt--oauth_authorization_code"></a>
### Nested Schema for `oauth_authorization_code`

Required:

- `client_id` (String) Client ID for the OAuth Credential Provider.
- `client_secret` (String, Sensitive) Client Secret for the OAuth Credential Provider.
- `oauth_authorization_url` (String) Authorization URL for the OAuth Credential Provider.
- `oauth_discovery_url` (String) OAuth URL for the OAuth Credential Provider.
- `oauth_token_url` (String) Token URL for the OAuth Credential Provider.
- `scopes` (String) Scopes for the OAuth Credential Provider.

Optional:

- `custom_parameters` (Attributes Set) Set Custom Parameters for the OAuth Credential Provider. (see [below for nested schema](#nestedatt--oauth_authorization_code--custom_parameters))
- `is_pkce_required` (Boolean) PKCE required flag for the OAuth Credential Provider.
- `lifetime` (Number) Lifetime (in seconds) of the OAuth Authorization Code credentials requested by the Credential Provider.
- `oauth_introspection_url` (String) Introspection Url of the OAuth 2.0 introspection endpoint, used to validate and obtain metadata about access tokens

Read-Only:

- `callback_url` (String) Authorization Callback URL for the OAuth Credential Provider. Callback URL can be pre-generated by matching the following template; 
	* https://AEMBIT_TENANT_ID.AEMBIT_STACK_DOMAIN/api/v1/credential-providers/RESOURCE_ID/callback 
	* RESOURCE_ID should be a valid uuid pre-generated for the Credential Provider resource.
- `lifetime_expiration` (String) ISO 8601 formatted Lifetime Expiration of the OAuth Authorization Code credentials requested by the Credential Provider. This expiration timer begins when the user successfully completes an authorization of the Credential Provider and will be set to the authorization time plus the Credential Provider Lifetime value at that moment.
- `state` (String) State for the OAuth Credential Provider.
- `user_authorization_url` (String) 3rd Party Authorization URL for User Consent for the OAuth Credential Provider.

<a id="nestedatt--oauth_authorization_code--custom_parameters"></a>
### Nested Schema for `oauth_authorization_code.custom_parameters`

Required:

- `key` (String) Key for Custom Parameter of the OAuth Credential Provider.
- `value` (String) Value for Custom Parameter of the OAuth Credential Provider.

Optional:

- `value_type` (String) Type of value for Custom Parameter of the OAuth Credential Provider. Only `literal` is currently supported.



<a id="nestedatt--oauth_client_credentials"></a>
### Nested Schema for `oauth_client_credentials`

Required:

- `client_id` (String) Client ID for the OAuth Credential Provider.
- `client_secret` (String, Sensitive) Client Secret for the OAuth Credential Provider.
- `credential_style` (String) Credential Style for the OAuth Credential Provider.
- `scopes` (String) Scopes for the OAuth Credential Provider.
- `token_url` (String) Token URL for the OAuth Credential Provider.

Optional:

- `custom_parameters` (Attributes Set) Set Custom Parameters for the OAuth Credential Provider. (see [below for nested schema](#nestedatt--oauth_client_credentials--custom_parameters))

<a id="nestedatt--oauth_client_credentials--custom_parameters"></a>
### Nested Schema for `oauth_client_credentials.custom_parameters`

Required:

- `key` (String) Key for Custom Parameter of the OAuth Credential Provider.
- `value` (String) Value for Custom Parameter of the OAuth Credential Provider.

Optional:

- `value_type` (String) Type of value for Custom Parameter of the OAuth Credential Provider. Only `literal` is currently supported.



<a id="nestedatt--oidc_id_token"></a>
### Nested Schema for `oidc_id_token`

Required:

- `algorithm_type` (String) JWT Signing algorithm type (RS256 or ES256)
- `audience` (String) Audience for OIDC ID Token configuration of the Credential Provider.
- `lifetime_in_minutes` (Number) Lifetime of the Credential Provider in minutes.
- `subject` (String) Subject for JWT Token for OIDC ID Token configuration of the Credential Provider.
- `subject_type` (String) Type of value for the JWT Token Subject. Possible values are `literal` or `dynamic`.

Optional:

- `custom_claims` (Attributes Set) Set of Custom Claims for the JWT Token. (see [below for nested schema](#nestedatt--oidc_id_token--custom_claims))

Read-Only:

- `issuer` (String) OIDC Issuer for OIDC ID Token configuration of the Credential Provider.

<a id="nestedatt--oidc_id_token--custom_claims"></a>
### Nested Schema for `oidc_id_token.custom_claims`

Required:

- `key` (String) Key for the JWT Token Custom Claim.
- `value` (String) Value for the JWT Token Custom Claim.
- `value_type` (String) Type of value for the JWT Token Custom Claim. Possible values are `literal` or `dynamic`.



<a id="nestedatt--snowflake_jwt"></a>
### Nested Schema for `snowflake_jwt`

Required:

- `account_id` (String) Snowflake Account ID of the Credential Provider.
- `username` (String) Snowflake Username of the Credential Provider.

Read-Only:

- `alter_user_command` (String) Snowflake Alter User Command generated for configuration of Snowflake by the Credential Provider.


<a id="nestedatt--username_password"></a>
### Nested Schema for `username_password`

Required:

- `password` (String, Sensitive) Password of the Credential Provider.
- `username` (String) Username of the Credential Provider.


<a id="nestedatt--vault_client_token"></a>
### Nested Schema for `vault_client_token`

Required:

- `lifetime` (Number) Lifetime (in seconds) of the JWT Token used to authenticate to the Vault Cluster. Note: The lifetime of the retrieved Vault Client Token is managed within Vault configuration.
- `subject` (String) Subject of the JWT Token used to authenticate to the Vault Cluster.
- `subject_type` (String) Type of value for the JWT Token Subject. Possible values are `literal` or `dynamic`.
- `vault_host` (String) Hostname of the Vault Cluster to be used for executing the login API.
- `vault_path` (String) Path to utilize when executing the login API on the Vault Cluster.
- `vault_port` (Number) Port of the Vault Cluster to be used for executing the login API.
- `vault_tls` (Boolean) Configuration to utilize TLS for connectivity to the Vault Cluster.

Optional:

- `custom_claims` (Attributes Set) Set of Custom Claims for the JWT Token used to authenticate to the Vault Cluster. (see [below for nested schema](#nestedatt--vault_client_token--custom_claims))
- `vault_forwarding` (String) If Vault Forwarding is required, this configuration can be set to `unconditional` or `conditional`.
- `vault_namespace` (String) Namespace to utilize when executing the login API on the Vault Cluster.
- `vault_private_network_access` (Boolean) Indicates if the Vault instance operates within a private network.
- `vault_role` (String) Role to utilize when executing the login API on the Vault Cluster.

<a id="nestedatt--vault_client_token--custom_claims"></a>
### Nested Schema for `vault_client_token.custom_claims`

Required:

- `key` (String) Key for the JWT Token Custom Claim.
- `value` (String) Value for the JWT Token Custom Claim.
- `value_type` (String) Type of value for the JWT Token Custom Claim. Possible values are `literal` or `dynamic`.



